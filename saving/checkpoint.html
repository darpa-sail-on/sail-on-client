
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Saving And Restoring Attributes of Algorithm &#8212; Sail-On Client 0.31.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/nature.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/sphinx-toolbox.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Checkpoint API" href="checkpoint_api.html" />
    <link rel="prev" title="Saving And Restoring Features for Algorithm" href="features.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="checkpoint_api.html" title="Checkpoint API"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="features.html" title="Saving And Restoring Features for Algorithm"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Sail-On Client 0.31.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Saving And Restoring Attributes of Algorithm</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="saving-and-restoring-attributes-of-algorithm">
<h1>Saving And Restoring Attributes of Algorithm<a class="headerlink" href="#saving-and-restoring-attributes-of-algorithm" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>We rely on <code class="code docutils literal notranslate"><span class="pre">Checkpoint</span></code> mixin to save and restore attribute of an algorithm.
The mixin can be added to an adaptor associated with an algorithm to provide
<code class="code docutils literal notranslate"><span class="pre">save_attributes</span></code> and <code class="code docutils literal notranslate"><span class="pre">restore_attributes</span></code> function. These functions
can be used with configuration options to save and restore states in a pickle
file.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Saving and restorying attributes is experimental, and error-prone due
to lack of a concrete use-case in the current evaluation.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Saving features and saving attributes were created with different use cases.
Saving features is used to save features for videos and restore them
across multiple tests. Thus the features can be extracted for a video
once and can be reused across multiple tests. We cannot guarantee this
mode of operation when checkpointing since attributes are not saved with
videos as keys. Thus checkpointing can be used to skip steps for a protocol
but it shouldn’t be used on a sequence of videos that is different from
the original sequence. This would result in undefined behavior.</p>
</div>
</div>
<div class="section" id="sample-detector-and-adapter">
<h2>Sample Detector and Adapter<a class="headerlink" href="#sample-detector-and-adapter" title="Permalink to this headline">¶</a></h2>
<div class="section" id="sample-detector">
<h3>Sample Detector<a class="headerlink" href="#sample-detector" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Detector constructor.</span>

<span class="sd">        Args:</span>
<span class="sd">            toolset (dict): Dictionary containing parameters for the constructor</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">MockONDAgent</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">feature_extraction</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">toolset</span><span class="p">:</span> <span class="n">Dict</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Feature extraction step for the algorithm.</span>

<span class="sd">        Args:</span>
<span class="sd">            toolset (dict): Dictionary containing parameters for different steps</span>

<span class="sd">        Return:</span>
<span class="sd">            Tuple of dictionary</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dummy_dict</span> <span class="o">=</span> <span class="n">toolset</span><span class="p">[</span><span class="s2">&quot;dummy_dict&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dummy_list</span> <span class="o">=</span> <span class="n">toolset</span><span class="p">[</span><span class="s2">&quot;dummy_list&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dummy_tuple</span> <span class="o">=</span> <span class="n">toolset</span><span class="p">[</span><span class="s2">&quot;dummy_tuple&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dummy_tensor</span> <span class="o">=</span> <span class="n">toolset</span><span class="p">[</span><span class="s2">&quot;dummy_tensor&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dummy_val</span> <span class="o">=</span> <span class="n">toolset</span><span class="p">[</span><span class="s2">&quot;dummy_val&quot;</span><span class="p">]</span>
        <span class="k">return</span> <span class="p">{},</span> <span class="p">{}</span>


<span class="k">class</span> <span class="nc">MockONDAdapterWithCheckpoint</span><span class="p">(</span><span class="n">Checkpointer</span><span class="p">,</span> <span class="n">MockONDAgent</span><span class="p">):</span>
</pre></div>
</div>
</div>
<div class="section" id="sample-adapter">
<h3>Sample Adapter<a class="headerlink" href="#sample-adapter" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;Mocks mainly used for testing protocols.&quot;&quot;&quot;</span>

<span class="kn">from</span> <span class="nn">sail_on_client.checkpointer</span> <span class="kn">import</span> <span class="n">Checkpointer</span>
<span class="kn">from</span> <span class="nn">sail_on_client.agent.ond_agent</span> <span class="kn">import</span> <span class="n">ONDAgent</span>

<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">Callable</span>

<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">shutil</span>
<span class="kn">import</span> <span class="nn">torch</span>

<span class="n">log</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">MockONDAgent</span><span class="p">(</span><span class="n">ONDAgent</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Mock Detector for OND Protocol.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Construct Mock OND Detector.&quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">step_dict</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Callable</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;Initialize&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">initialize</span><span class="p">,</span>
            <span class="s2">&quot;FeatureExtraction&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">feature_extraction</span><span class="p">,</span>
            <span class="s2">&quot;WorldDetection&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">world_detection</span><span class="p">,</span>
            <span class="s2">&quot;NoveltyClassification&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">novelty_classification</span><span class="p">,</span>
            <span class="s2">&quot;NoveltyAdaption&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">novelty_adaptation</span><span class="p">,</span>
            <span class="s2">&quot;NoveltyCharacterization&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">novelty_characterization</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">toolset</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Algorithm Initialization.</span>

<span class="sd">        Args:</span>
<span class="sd">            toolset (dict): Dictionary containing parameters for different steps</span>

<span class="sd">        Return:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">feature_extraction</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">toolset</span><span class="p">:</span> <span class="n">Dict</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Feature extraction step for the algorithm.</span>

<span class="sd">        Args:</span>
<span class="sd">            toolset (dict): Dictionary containing parameters for different steps</span>

<span class="sd">        Return:</span>
<span class="sd">            Tuple of dictionary</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dataset</span> <span class="o">=</span> <span class="n">toolset</span><span class="p">[</span><span class="s2">&quot;dataset&quot;</span><span class="p">]</span>
        <span class="k">return</span> <span class="p">{},</span> <span class="p">{}</span>

    <span class="k">def</span> <span class="nf">world_detection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">toolset</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Detect change in world ( Novelty has been introduced ).</span>

<span class="sd">        Args:</span>
<span class="sd">            toolset (dict): Dictionary containing parameters for different steps</span>

<span class="sd">        Return:</span>
<span class="sd">            path to csv file containing the results for change in world</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">dataset_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dataset</span><span class="p">)</span>
        <span class="n">dst_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dataset_dir</span><span class="p">,</span> <span class="s2">&quot;wc.csv&quot;</span><span class="p">)</span>
        <span class="n">shutil</span><span class="o">.</span><span class="n">copyfile</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dataset</span><span class="p">,</span> <span class="n">dst_file</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">dst_file</span>

    <span class="k">def</span> <span class="nf">novelty_classification</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">toolset</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Classify data provided in known classes and unknown class.</span>

<span class="sd">        Args:</span>
<span class="sd">            toolset (dict): Dictionary containing parameters for different steps</span>

<span class="sd">        Return:</span>
<span class="sd">            path to csv file containing the results for novelty classification step</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">dataset_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dataset</span><span class="p">)</span>
        <span class="n">dst_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dataset_dir</span><span class="p">,</span> <span class="s2">&quot;ncl.csv&quot;</span><span class="p">)</span>
        <span class="n">shutil</span><span class="o">.</span><span class="n">copyfile</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dataset</span><span class="p">,</span> <span class="n">dst_file</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">dst_file</span>

    <span class="k">def</span> <span class="nf">novelty_adaptation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">toolset</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update models based on novelty classification and characterization.</span>

<span class="sd">        Args:</span>
<span class="sd">            toolset (dict): Dictionary containing parameters for different steps</span>

<span class="sd">        Return:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">novelty_characterization</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">toolset</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Characterize novelty by clustering different novel samples.</span>

<span class="sd">        Args:</span>
<span class="sd">            toolset (dict): Dictionary containing parameters for different steps</span>

<span class="sd">        Return:</span>
<span class="sd">            path to csv file containing the results for novelty characterization step</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">dataset_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dataset</span><span class="p">)</span>
        <span class="n">dst_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dataset_dir</span><span class="p">,</span> <span class="s2">&quot;nc.csv&quot;</span><span class="p">)</span>
        <span class="n">shutil</span><span class="o">.</span><span class="n">copyfile</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dataset</span><span class="p">,</span> <span class="n">dst_file</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">dst_file</span>

    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">toolset</span><span class="p">:</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">step_descriptor</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Execute method used by the protocol to run different steps.</span>

<span class="sd">        Args:</span>
<span class="sd">            toolset (dict): Dictionary containing parameters for different steps</span>
<span class="sd">            step_descriptor (str): Name of the step</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Executing </span><span class="si">{</span><span class="n">step_descriptor</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">step_dict</span><span class="p">[</span><span class="n">step_descriptor</span><span class="p">](</span><span class="n">toolset</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">MockONDAgentWithAttributes</span><span class="p">(</span><span class="n">MockONDAgent</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Mock Detector for testing checkpointing.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Detector constructor.</span>

<span class="sd">        Args:</span>
<span class="sd">            toolset (dict): Dictionary containing parameters for the constructor</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">MockONDAgent</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">feature_extraction</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">toolset</span><span class="p">:</span> <span class="n">Dict</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Feature extraction step for the algorithm.</span>

<span class="sd">        Args:</span>
<span class="sd">            toolset (dict): Dictionary containing parameters for different steps</span>

<span class="sd">        Return:</span>
<span class="sd">            Tuple of dictionary</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dummy_dict</span> <span class="o">=</span> <span class="n">toolset</span><span class="p">[</span><span class="s2">&quot;dummy_dict&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dummy_list</span> <span class="o">=</span> <span class="n">toolset</span><span class="p">[</span><span class="s2">&quot;dummy_list&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dummy_tuple</span> <span class="o">=</span> <span class="n">toolset</span><span class="p">[</span><span class="s2">&quot;dummy_tuple&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dummy_tensor</span> <span class="o">=</span> <span class="n">toolset</span><span class="p">[</span><span class="s2">&quot;dummy_tensor&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dummy_val</span> <span class="o">=</span> <span class="n">toolset</span><span class="p">[</span><span class="s2">&quot;dummy_val&quot;</span><span class="p">]</span>
        <span class="k">return</span> <span class="p">{},</span> <span class="p">{}</span>


<span class="k">class</span> <span class="nc">MockONDAdapterWithCheckpoint</span><span class="p">(</span><span class="n">Checkpointer</span><span class="p">,</span> <span class="n">MockONDAgent</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Mock Adapter for testing checkpointing.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">toolset</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Detector constructor.</span>

<span class="sd">        Args:</span>
<span class="sd">            toolset (dict): Dictionary containing parameters for the constructor</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">MockONDAgent</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">Checkpointer</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">toolset</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">detector</span> <span class="o">=</span> <span class="n">MockONDAgentWithAttributes</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">get_config</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get config for the plugin.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Parameters for the agent</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">config</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_config</span><span class="p">()</span>
        <span class="n">config</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">toolset</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">config</span>

    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">toolset</span><span class="p">:</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">step_descriptor</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Execute method used by the protocol to run different steps.</span>

<span class="sd">        Args:</span>
<span class="sd">            toolset (dict): Dictionary containing parameters for different steps</span>
<span class="sd">            step_descriptor (str): Name of the step</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Executing </span><span class="si">{</span><span class="n">step_descriptor</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">detector</span><span class="o">.</span><span class="n">step_dict</span><span class="p">[</span><span class="n">step_descriptor</span><span class="p">](</span><span class="n">toolset</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Overriden method to compare two mock adapters.</span>

<span class="sd">        Args:</span>
<span class="sd">            other (MockONDAdapterWithCheckpoint): Another instance of mock adapter</span>

<span class="sd">        Return:</span>
<span class="sd">            True if both instances have same attributes</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">MockONDAdapterWithCheckpoint</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>

        <span class="k">return</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">detector</span><span class="o">.</span><span class="n">dummy_dict</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">detector</span><span class="o">.</span><span class="n">dummy_dict</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">detector</span><span class="o">.</span><span class="n">dummy_list</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">detector</span><span class="o">.</span><span class="n">dummy_list</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">detector</span><span class="o">.</span><span class="n">dummy_tuple</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">detector</span><span class="o">.</span><span class="n">dummy_tuple</span>
            <span class="ow">and</span> <span class="nb">bool</span><span class="p">(</span>
                <span class="n">torch</span><span class="o">.</span><span class="n">all</span><span class="p">(</span>
                    <span class="n">torch</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">detector</span><span class="o">.</span><span class="n">dummy_tensor</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">detector</span><span class="o">.</span><span class="n">dummy_tensor</span><span class="p">)</span>
                <span class="p">)</span>
            <span class="p">)</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">detector</span><span class="o">.</span><span class="n">dummy_val</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">detector</span><span class="o">.</span><span class="n">dummy_val</span>
        <span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Saving And Restoring Attributes of Algorithm</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#sample-detector-and-adapter">Sample Detector and Adapter</a><ul>
<li><a class="reference internal" href="#sample-detector">Sample Detector</a></li>
<li><a class="reference internal" href="#sample-adapter">Sample Adapter</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="features.html"
                        title="previous chapter">Saving And Restoring Features for Algorithm</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="checkpoint_api.html"
                        title="next chapter">Checkpoint API</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/saving/checkpoint.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="checkpoint_api.html" title="Checkpoint API"
             >next</a> |</li>
        <li class="right" >
          <a href="features.html" title="Saving And Restoring Features for Algorithm"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Sail-On Client 0.31.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Saving And Restoring Attributes of Algorithm</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, Kitware INC..
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.3.2.
    </div>
  </body>
</html>