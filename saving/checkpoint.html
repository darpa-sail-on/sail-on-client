<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Saving And Restoring Attributes of Algorithm &mdash; Sail-On Client 0.30.2 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/sphinx-toolbox.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Checkpoint API" href="checkpoint_api.html" />
    <link rel="prev" title="Saving And Restoring Features for Algorithm" href="features.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Sail-On Client
          </a>
              <div class="version">
                0.30.2
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../user/install.html">Installation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../protocols/ond.html">Open World Novelty Detection (OND)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../protocols/condda.html">Continuous Open-set Novelty Detection, Discovery, Adaptation (CONDDA)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../protocols/protocol_api.html">Protocol API</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../harness/harness.html">Harness</a></li>
<li class="toctree-l1"><a class="reference internal" href="../harness/harness_api.html">Harness API</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../metrics/metric_formulation.html">Program Metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../metrics/metric_api.html">Metric API</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../feedback/feedback.html">Feedback</a></li>
<li class="toctree-l1"><a class="reference internal" href="../feedback/feedback_api.html">Feedback API</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../plugins/plugins.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plugins/hydra_plugins.html">Hydra Plugins</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="features.html">Saving And Restoring Features for Algorithm</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Saving And Restoring Attributes of Algorithm</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#sample-detector-adapter-and-configuration-parameters">Sample Detector, Adapter and Configuration Parameters</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#sample-detector">Sample Detector</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sample-adapter">Sample Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sample-configuration">Sample Configuration</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="checkpoint_api.html">Checkpoint API</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Sail-On Client</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Saving And Restoring Attributes of Algorithm</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/saving/checkpoint.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="saving-and-restoring-attributes-of-algorithm">
<h1>Saving And Restoring Attributes of Algorithm<a class="headerlink" href="#saving-and-restoring-attributes-of-algorithm" title="Permalink to this headline"></a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline"></a></h2>
<p>We rely on <code class="code docutils literal notranslate"><span class="pre">Checkpoint</span></code> mixin to save and restore attribute of an algorithm.
The mixin can be added to an adaptor associated with an algorithm to provide
<code class="code docutils literal notranslate"><span class="pre">save_attributes</span></code> and <code class="code docutils literal notranslate"><span class="pre">restore_attributes</span></code> function. These functions
can be used with configuration options to save and restore states in a pickle
file. Refer to <cite>ond_12_with_rd_nd_save.json</cite> and <cite>ond_12_with_rd_nd_restore.json</cite>
configurations on the <a class="reference external" href="https://gitlab.kitware.com/darpa-sail-on/sail-on-client/-/tree/master/config">config</a> directory for more details.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Saving features and saving attributes were created with different use cases.
Saving features is used to save features for videos and restore them
across multiple tests. Thus the features can be extracted for a video
once and can be reused across multiple tests. We cannot guarantee this
mode of operation when checkpointing since attributes are not saved with
videos as keys. Thus checkpointing can be used to skip steps for a protocol
but it shouldn’t be used on a sequence of videos that is different from
the original sequence. This would result in undefined behavior.</p>
</div>
</div>
<div class="section" id="sample-detector-adapter-and-configuration-parameters">
<h2>Sample Detector, Adapter and Configuration Parameters<a class="headerlink" href="#sample-detector-adapter-and-configuration-parameters" title="Permalink to this headline"></a></h2>
<div class="section" id="sample-detector">
<h3>Sample Detector<a class="headerlink" href="#sample-detector" title="Permalink to this headline"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Detector constructor.</span>

<span class="sd">        Args:</span>
<span class="sd">            toolset (dict): Dictionary containing parameters for the constructor</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">MockONDAgent</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">feature_extraction</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">toolset</span><span class="p">:</span> <span class="n">Dict</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Feature extraction step for the algorithm.</span>

<span class="sd">        Args:</span>
<span class="sd">            toolset (dict): Dictionary containing parameters for different steps</span>

<span class="sd">        Return:</span>
<span class="sd">            Tuple of dictionary</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dummy_dict</span> <span class="o">=</span> <span class="n">toolset</span><span class="p">[</span><span class="s2">&quot;dummy_dict&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dummy_list</span> <span class="o">=</span> <span class="n">toolset</span><span class="p">[</span><span class="s2">&quot;dummy_list&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dummy_tuple</span> <span class="o">=</span> <span class="n">toolset</span><span class="p">[</span><span class="s2">&quot;dummy_tuple&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dummy_tensor</span> <span class="o">=</span> <span class="n">toolset</span><span class="p">[</span><span class="s2">&quot;dummy_tensor&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dummy_val</span> <span class="o">=</span> <span class="n">toolset</span><span class="p">[</span><span class="s2">&quot;dummy_val&quot;</span><span class="p">]</span>
        <span class="k">return</span> <span class="p">{},</span> <span class="p">{}</span>


<span class="k">class</span> <span class="nc">MockONDAdapterWithCheckpoint</span><span class="p">(</span><span class="n">Checkpointer</span><span class="p">,</span> <span class="n">MockONDAgent</span><span class="p">):</span>
</pre></div>
</div>
</div>
<div class="section" id="sample-adapter">
<h3>Sample Adapter<a class="headerlink" href="#sample-adapter" title="Permalink to this headline"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">toolset</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Detector constructor.</span>

<span class="sd">        Args:</span>
<span class="sd">            toolset (dict): Dictionary containing parameters for the constructor</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">MockONDAgent</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">Checkpointer</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">toolset</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">detector</span> <span class="o">=</span> <span class="n">MockONDAgentWithAttributes</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">get_config</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get config for the plugin.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Parameters for the agent</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">config</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_config</span><span class="p">()</span>
        <span class="n">config</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">toolset</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">config</span>

    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">toolset</span><span class="p">:</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">step_descriptor</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Execute method used by the protocol to run different steps.</span>

<span class="sd">        Args:</span>
<span class="sd">            toolset (dict): Dictionary containing parameters for different steps</span>
<span class="sd">            step_descriptor (str): Name of the step</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Executing </span><span class="si">{</span><span class="n">step_descriptor</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">detector</span><span class="o">.</span><span class="n">step_dict</span><span class="p">[</span><span class="n">step_descriptor</span><span class="p">](</span><span class="n">toolset</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">        Overriden method to compare two mock adapters.</span>
</pre></div>
</div>
</div>
<div class="section" id="sample-configuration">
<h3>Sample Configuration<a class="headerlink" href="#sample-configuration" title="Permalink to this headline"></a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The configuration options used for saving attributes are highlighted in the
examples below.</p>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="features.html" class="btn btn-neutral float-left" title="Saving And Restoring Features for Algorithm" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="checkpoint_api.html" class="btn btn-neutral float-right" title="Checkpoint API" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, Kitware INC..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>